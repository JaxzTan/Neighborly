"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const format_1 = require("../format");
describe("formatTimeDiff", () => {
    const now = Date.UTC(2024, 0, 1, 0, 0, 0, 0); // Jan 1, 2024, 00:00:00 UTC
    it("shows time diff in seconds, minutes, hours, days", () => {
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + (30 * format_1.TimeUnit.ONE_SECOND + 123),
            now,
        })).toBe("30s");
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + (90 * format_1.TimeUnit.ONE_SECOND + 123),
            now,
        })).toBe("1m 30s");
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + (2 * format_1.TimeUnit.ONE_HOUR) + (5 * format_1.TimeUnit.ONE_MINUTE) + (5 * format_1.TimeUnit.ONE_SECOND),
            now,
        })).toBe("2h 5m");
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + (3 * format_1.TimeUnit.ONE_DAY) + (4 * format_1.TimeUnit.ONE_HOUR) + (5 * format_1.TimeUnit.ONE_MINUTE) + (5 * format_1.TimeUnit.ONE_SECOND),
            now,
        })).toBe("3d 4h");
    });
    it("uses full labels if format is 'long'", () => {
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + (30 * format_1.TimeUnit.ONE_SECOND),
            now,
            format: "long",
        })).toBe("30 secs");
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + (90 * format_1.TimeUnit.ONE_SECOND),
            now,
            format: "long",
        })).toBe("1 min 30 secs");
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + 2 * format_1.TimeUnit.ONE_HOUR + 5 * format_1.TimeUnit.ONE_MINUTE,
            now,
            format: "long",
        })).toBe("2 hours 5 mins");
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + 3 * format_1.TimeUnit.ONE_DAY + 4 * format_1.TimeUnit.ONE_HOUR,
            now,
            format: "long",
        })).toBe("3 days 4 hours");
    });
    it("returns endLabel if time diff is less than minTimeUnit", () => {
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + (format_1.TimeUnit.ONE_SECOND - 1),
            now,
            minTimeUnit: format_1.TimeUnit.ONE_SECOND,
        })).toBe("< 1s");
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + (59 * format_1.TimeUnit.ONE_SECOND),
            now,
            minTimeUnit: format_1.TimeUnit.ONE_MINUTE,
        })).toBe("< 1m");
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + (format_1.TimeUnit.ONE_MINUTE - 1),
            now,
            minTimeUnit: format_1.TimeUnit.ONE_MINUTE,
            format: "long",
        })).toBe("< 1 min");
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + (format_1.TimeUnit.ONE_HOUR - 1),
            now,
            minTimeUnit: format_1.TimeUnit.ONE_HOUR,
            format: "long",
        })).toBe("< 1 hour");
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + (format_1.TimeUnit.ONE_DAY - 1),
            now,
            minTimeUnit: format_1.TimeUnit.ONE_DAY,
            format: "long",
        })).toBe("< 1 day");
    });
    it("returns only one unit for exact time diffs", () => {
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + format_1.TimeUnit.ONE_MINUTE,
            now,
            minTimeUnit: format_1.TimeUnit.ONE_MINUTE,
        })).toBe("1m");
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + format_1.TimeUnit.ONE_HOUR,
            now,
            minTimeUnit: format_1.TimeUnit.ONE_HOUR,
        })).toBe("1h");
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + format_1.TimeUnit.ONE_DAY,
            now,
            minTimeUnit: format_1.TimeUnit.ONE_DAY,
        })).toBe("1d");
    });
    it("works for past and future timestamps", () => {
        expect((0, format_1.formatTimeDiff)({
            timestamp: now - (90 * format_1.TimeUnit.ONE_SECOND),
            now,
        })).toBe("1m 30s");
        expect((0, format_1.formatTimeDiff)({
            timestamp: now - 2 * format_1.TimeUnit.ONE_HOUR - 5 * format_1.TimeUnit.ONE_MINUTE,
            now,
        })).toBe("2h 5m");
    });
    it("returns endLabel if result is empty string", () => {
        // This can only happen if time diff is 0
        expect((0, format_1.formatTimeDiff)({
            timestamp: now,
            now,
        })).toBe("< 1s");
    });
    it("returns correct result for boundary values (exactly 1m, 1h, 1d)", () => {
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + format_1.TimeUnit.ONE_MINUTE,
            now,
        })).toBe("1m");
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + format_1.TimeUnit.ONE_HOUR,
            now,
        })).toBe("1h");
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + format_1.TimeUnit.ONE_DAY,
            now,
        })).toBe("1d");
        // long format
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + format_1.TimeUnit.ONE_MINUTE,
            now,
            format: "long",
        })).toBe("1 min");
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + format_1.TimeUnit.ONE_HOUR,
            now,
            format: "long",
        })).toBe("1 hour");
        expect((0, format_1.formatTimeDiff)({
            timestamp: now + format_1.TimeUnit.ONE_DAY,
            now,
            format: "long",
        })).toBe("1 day");
    });
});
//# sourceMappingURL=formatTimeDiff.test.js.map