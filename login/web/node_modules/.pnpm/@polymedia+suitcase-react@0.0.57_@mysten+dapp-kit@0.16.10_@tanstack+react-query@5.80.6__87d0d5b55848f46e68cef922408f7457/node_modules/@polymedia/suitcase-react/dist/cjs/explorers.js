"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ExplorerRadioSelector = exports.EXPLORER_NAMES = void 0;
exports.loadExplorer = loadExplorer;
exports.switchExplorer = switchExplorer;
const jsx_runtime_1 = require("react/jsx-runtime");
const selectors_1 = require("./selectors");
exports.EXPLORER_NAMES = ["Polymedia", "Suiscan", "SuiVision"];
/**
 * A radio button menu to select a Sui explorer and save the choice to local storage.
 */
const ExplorerRadioSelector = ({ selectedExplorer, onSwitch, className = "", }) => {
    const options = exports.EXPLORER_NAMES.map(explorer => ({
        value: explorer,
        label: explorer
    }));
    const onSelect = (newExplorer) => {
        switchExplorer(newExplorer, onSwitch);
    };
    return ((0, jsx_runtime_1.jsx)(selectors_1.RadioSelector, { options: options, selectedValue: selectedExplorer, onSelect: onSelect, className: `poly-explorer-radio-selector ${className}` }));
};
exports.ExplorerRadioSelector = ExplorerRadioSelector;
/**
 * Load the chosen Sui explorer name from local storage.
 */
function loadExplorer(defaultExplorer) {
    if (!isExplorerName(defaultExplorer)) {
        throw new Error(`Explorer not supported: ${defaultExplorer}`);
    }
    const explorer = localStorage.getItem("polymedia.explorer");
    if (isExplorerName(explorer)) {
        return explorer;
    }
    localStorage.setItem("polymedia.explorer", defaultExplorer);
    return defaultExplorer;
}
/**
 * Change the chosen Sui explorer, update local storage, and optionally trigger a callback.
 */
function switchExplorer(newExplorer, onSwitch) {
    if (!isExplorerName(newExplorer)) {
        throw new Error(`Explorer not supported: ${newExplorer}`);
    }
    localStorage.setItem("polymedia.explorer", newExplorer);
    if (onSwitch) {
        onSwitch(newExplorer);
    }
    else {
        window.location.reload();
    }
}
function isExplorerName(value) {
    return value !== null && exports.EXPLORER_NAMES.includes(value);
}
//# sourceMappingURL=explorers.js.map